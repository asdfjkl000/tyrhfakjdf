<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Coin Toss Game</title>
<style>
    body {
        font-family: Arial, sans-serif;
        text-align: center;
    }
    button {
        padding: 10px 20px;
        margin: 10px;
        font-size: 16px;
        cursor: pointer;
    }
    .game-box {
        border: 2px solid #ccc;
        padding: 20px;
        margin: 20px auto;
        width: 80%;
        max-width: 600px;
        border-radius: 10px;
    }
    .message-box {
        border: 1px solid #ccc;
        padding: 10px;
        margin-top: 20px;
        background-color: #f9f9f9;
        border-radius: 5px;
        overflow-y: auto; /* Enable vertical scroll */
        height: 200px; /* Set fixed height */
    }
    .message {
        border-bottom: 1px solid #ccc;
        padding-bottom: 5px;
        margin-bottom: 5px;
        font-size: 14px;
        text-align: left;
    }
</style>
</head>
<body>
<div class="game-box">
    <h1>Coin Toss Game</h1>
    <div id="health-status">
        <p>Player Health: <span id="player-health">100</span></p>
        <p>Opponent Health: <span id="opponent-health">100</span></p>
    </div>
    <div class="message-box" id="messages"></div>
    <div>
        <button id="toss-head" onclick="tossCoin('head')">Toss Head</button>
        <button id="toss-tail" onclick="tossCoin('tail')">Toss Tail</button>
    </div>
    <div>
        <button id="attack-btn" onclick="playerAction('attack')" disabled>Attack</button>
        <button id="defend-btn" onclick="playerAction('defend')" disabled>Defend</button>
    </div>
    <div>
        <button id="reset-btn" onclick="resetGame()" disabled>Reset Game</button>
    </div>
</div>

<script>
    let playerHealth = 100;
    let opponentHealth = 100;
    let currentPlayerAction;

    function tossCoin(choice) {
        const coinResult = Math.random() < 0.5 ? 'head' : 'tail';
        const tossMessage = `Coin is ${coinResult}. You chose ${choice}!`;

        document.getElementById('attack-btn').disabled = false;
        document.getElementById('defend-btn').disabled = false;

        showMessage(tossMessage);
    }

    function calculateDamage() {
        return Math.floor(Math.random() * 5) + 1; 
    }

    function opponentAction() {
        return Math.random() < 0.5 ? 'attack' : 'defend'; // Randomize opponent's action
    }

    function playerAction(action) {
        currentPlayerAction = action;
        if (action === 'attack') {
            showMessage("<strong>You will Attack!</strong>");
            playerAttack();
        } else {
            showMessage("<strong>You will Defend!</strong>");
            playerDefend();
        }
    }

    function playerAttack() {
        const damage = calculateDamage();
        let opponentBlock = Math.random() < 0.5; // Randomize opponent's block
        if (opponentBlock) {
            showMessage("The opponent completely blocked your attack.");
            damage = 0; // If opponent blocks, damage is zero
        } else {
            opponentHealth -= damage;
            if (opponentHealth < 0) opponentHealth = 0;
            showMessage(`You inflict ${damage} damage.`);
        }
        updateHealthStatus();
        opponentTurn();
    }

    function playerDefend() {
        const action = opponentAction();
        if (action === 'attack') {
            const opponentDamage = Math.floor(Math.random() * 4); // Randomize opponent's damage between 0 and 3
            playerHealth -= opponentDamage;
            if (playerHealth < 0) playerHealth = 0;
            showMessage(`Opponent inflicts ${opponentDamage} damage.`);
        } else if (action === 'defend') {
            showMessage("Opponent defends too.");
        }
        updateHealthStatus();
    }

    function opponentTurn() {
        if (currentPlayerAction === 'defend') {
            return;
        }

        if (opponentHealth > 0) { // Check if opponent can attack
            const action = opponentAction();
            if (action === 'attack') {
                playerDefend();
            } else if (action === 'defend') {
                showMessage("Opponent defends.");
            }
       
        }

    }

    function updateHealthStatus() {
        document.getElementById('player-health').textContent = playerHealth;
        document.getElementById('opponent-health').textContent = opponentHealth;
        checkHealth();
    }

    function checkHealth() {
        if (playerHealth <= 0) {
            showMessage("Opponent wins.");
            disableButtons();
        } else if (opponentHealth <= 0) {
            showMessage("Player wins.");
            disableButtons();
        }
    }

    function resetGame() {
        playerHealth = 100;
        opponentHealth = 100;
        updateHealthStatus();
        clearMessages();
        document.getElementById('reset-btn').disabled = true;
        document.getElementById('toss-head').disabled = false;
        document.getElementById('toss-tail').disabled = false;
    }

    function disableButtons() {
        document.getElementById('attack-btn').disabled = true;
        document.getElementById('defend-btn').disabled = true;
        document.getElementById('reset-btn').disabled = false;
    }

    function showMessage(message) {
        const messagesDiv = document.getElementById('messages');
        const p = document.createElement('p');
        p.classList.add('message');
        p.innerHTML = message; // Using innerHTML to render HTML tags
        messagesDiv.appendChild(p);
    }

    function clearMessages() {
        document.getElementById('messages').innerHTML = '';
    }
</script>
</body>
</html>
